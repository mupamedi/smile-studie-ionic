{"version":3,"sources":["../../src/pages/welcome/welcome.ts","../../src/pages/terms/terms.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/services/AuthenticationService.ts","../../src/pages/tutorial/tutorial.ts","../../src/pages/questionaire/questionaire.ts","../../src/pages/info/info.ts","../../src/pages/intervention-action/intervention-action.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/services/SmileQueryService.ts","../../src/pages/loading/loading.ts","../../src/pages/intervention/intervention.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import {Component, OnInit} from \"@angular/core\";\nimport {NavController, Platform, ToastController} from \"ionic-angular\";\nimport {AuthenticationService} from \"../../services/AuthenticationService\";\nimport {TutorialPage} from \"../tutorial/tutorial\";\nimport {LoadingPage} from \"../loading/loading\";\nimport {UniqueDeviceID} from \"@ionic-native/unique-device-id\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\nimport {TranslateService} from \"@ngx-translate/core\";\n@Component({\n  selector: 'welcome-page',\n  templateUrl: 'welcome.html'\n})\nexport class WelcomePage implements OnInit {\n\n  somethingWentTerriblyWrongError: string;\n  deviceNotSupportedError: string;\n\n  constructor(public navCtrl: NavController,\n              public authenticationService: AuthenticationService,\n              private idService: UniqueDeviceID,\n              private nativeStorage: NativeStorage,\n              private toastCtrl: ToastController,\n              private translateService: TranslateService,\n              private platform: Platform) {\n    this.translateService.get(['UNKNOWN_ERROR', 'DEVICE_NOT_SUPPORTED_ERROR']).subscribe(values => {\n      this.somethingWentTerriblyWrongError = values['UNKNOWN_ERROR'];\n      this.deviceNotSupportedError = values['DEVICE_NOT_SUPPORTED_ERROR'];\n    })\n  };\n\n  //TODO for future versions: check for version update/reinstall\n\n  ngOnInit() {\n    console.log(\"Calling Welcome.ngOnInit()\");\n    this.platform.ready().then(readySource => {\n      if (readySource === 'cordova') {\n        console.log(\"Cordova is ready, checking storage for token!\");\n        this.checkForToken();\n      }\n    });\n  }\n\n  checkForToken() {\n    this.nativeStorage.getItem('token').then(token => {\n      console.log(\"We already have a token!\");\n      console.log(\"Token:\");\n      console.log(token);\n      this.nativeStorage.getItem('tutorialAccepted').then(() => {\n        console.log(\"Tutorial was accepted already, moving to LoadingPage\");\n        this.navCtrl.setRoot(LoadingPage);\n      }).catch(() => {\n        console.log(\"tutorialAccepted is not in storage yet, moving to TutorialPage\");\n        this.navCtrl.setRoot(TutorialPage);\n      })\n    }).catch(() => {\n      console.log(\"We don't have a token yet, waiting for user input!\");\n    })\n  }\n\n  /**\n   * Beware: async gore.\n   */\n  login() {\n    console.log(\"Calling Welcome.login()\");\n    let deviceId;\n    this.idService.get().then(result => {\n      deviceId = result;\n      console.log(\"This device's id:\");\n      console.log(result);\n      this.authenticationService.login(deviceId, deviceId).subscribe(result => {\n        if (result) {\n          console.log(\"Login was successful!\");\n          this.nativeStorage.getItem('tutorialAccepted').then(value => {\n            if (value) {\n              console.log(\"Tutorial was accepted already, moving to LoadingPage\");\n              this.navCtrl.setRoot(LoadingPage);\n            } else {\n              console.log(\"Tutorial not done yet, moving to TutorialPage\");\n              this.navCtrl.setRoot(TutorialPage);\n            }\n          }).catch(() => {\n            console.log(\"tutorialAccepted is not in storage yet, moving to TutorialPage\");\n            this.navCtrl.setRoot(TutorialPage);\n          });\n        } else {\n          console.log(\"Login was unsuccessful, registering device\");\n          this.register(deviceId);\n        }\n      }, error => {\n        console.log(\"Login error, printing toast\");\n        this.showToast(error);\n      })\n    }).catch(error => {\n        console.log(\"Can't retrieve UUID error\", error);\n        this.showToast(this.deviceNotSupportedError);\n      }\n    );\n  }\n\n  showToast(message: string) {\n    this.toastCtrl.create({\n      message: message,\n      duration: 3000\n    }).present();\n  }\n\n  register(deviceId) {\n    console.log('Calling Welcome.register()');\n    this.authenticationService.register(deviceId, deviceId).subscribe(result => {\n      if (result) {\n        console.log(\"Register was successful, lets try login again\");\n        this.login();\n      } else {\n        console.log(\"Register failed, user already exists. This should never happen, because then login would succeed\");\n        this.showToast(this.somethingWentTerriblyWrongError);\n      }\n    }, error => {\n      console.log(\"Register error, printing toast\");\n      this.showToast(error);\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/welcome/welcome.ts","import {Component} from \"@angular/core\";\n@Component({\n  selector: 'terms-page',\n  templateUrl: 'terms.html'\n})\nexport class TermsPage {\n  constructor() {\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/terms/terms.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 124;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 124\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 166;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 166\n// module chunks = 0","import {Injectable} from \"@angular/core\";\nimport {Http, Headers, Response} from \"@angular/http\";\nimport {Observable} from \"rxjs/Observable\";\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/observable/throw';\nimport {SmileQueryService} from \"./SmileQueryService\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\nimport {TranslateService} from \"@ngx-translate/core\";\n\n/**\n * Created by mss on 02.09.17.\n */\n\n@Injectable()\nexport class AuthenticationService {\n\n  private authUrl = SmileQueryService.baseUrl + \"auth\";\n  private registerUrl = SmileQueryService.baseUrl + \"register\";\n  private headers = new Headers({'Content-Type': 'application/json'});\n\n  unknownServerError: string;\n\n\n  constructor(private http: Http,\n              private nativeStorage: NativeStorage,\n              private translateService: TranslateService) {\n    this.translateService.get('SERVER_ERROR').subscribe(value => {\n      this.unknownServerError = value;\n    })\n  }\n\n  login(username: string, password: string): Observable<boolean> {\n    console.log(\"Calling AuthenticationService.login()\");\n    return this.http.post(this.authUrl, JSON.stringify({\n      username: username,\n      password: password\n    }), {headers: this.headers})\n      .map((response: Response) => {\n        if (response.status == 204) {\n          console.log(\"Login returned 204 -> Wrong password\");\n          return false;\n        }\n        let token = response.json() && response.json().token;\n        if (token) {\n          console.log(\"Login returned 200 -> Good login, got token\");\n          return this.nativeStorage.setItem('token', token).then(() => {\n            return true;\n          });\n        } else {\n          console.log(\"Server returned something else than 200 or 204 -> this should never happen\");\n          Observable.throw(response.statusText);\n        }\n      }).catch((error: any) => {\n        console.log(\"Server errror. Probably bad connection\");\n        return Observable.throw(error.json().error || this.unknownServerError)\n      });\n  }\n\n  register(username: string, password: string): Observable<boolean> {\n    console.log(\"Calling AuthenticationService.register()\");\n    return this.http.post(this.registerUrl, JSON.stringify({\n      username: username,\n      password: password\n    }), {headers: this.headers})\n      .map((response: Response) => {\n        if (response.status == 204) {\n          console.log(\"Register returned 204 -> User already exists\");\n          return false;\n        } else if (response.status == 200) {\n          console.log(\"Register returned 200 -> Good register\");\n          return true;\n        } else {\n          console.log(\"Server returned something else than 200 or 204 -> this should never happen\");\n          Observable.throw(response.statusText);\n        }\n      }).catch((error: any) => {\n        console.log(\"Server errror. Probably bad connection\");\n        return Observable.throw(error.json().error || this.unknownServerError)\n      });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/AuthenticationService.ts","import {Component, OnInit, ViewChild} from \"@angular/core\";\nimport {NavController, Slides} from \"ionic-angular\";\nimport {TranslateService} from \"@ngx-translate/core\";\nimport {TermsPage} from \"../terms/terms\";\nimport {LoadingPage} from \"../loading/loading\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\n\nexport interface Slide {\n  title: string;\n  description: string;\n  image?: string;\n}\n\n@Component({\n  selector: 'tutorial-page',\n  templateUrl: 'tutorial.html'\n})\nexport class TutorialPage implements OnInit {\n  @ViewChild('slider')\n  slider: Slides;\n  slides: Slide[];\n\n  constructor(public navCtrl: NavController,\n              public translateService: TranslateService,\n              private nativeStorage: NativeStorage) {\n  }\n\n  ngOnInit() {\n    this.translateService.get(\n      [\n        \"TUTORIAL_SLIDE2_TITLE\",\n        \"TUTORIAL_SLIDE2_DESCRIPTION\",\n        \"TUTORIAL_SLIDE3_TITLE\",\n        \"TUTORIAL_SLIDE3_DESCRIPTION\",\n        \"TUTORIAL_SLIDE4_TITLE\",\n        \"TUTORIAL_SLIDE4_DESCRIPTION\",\n        \"TUTORIAL_SLIDE5_TITLE\",\n        \"TUTORIAL_SLIDE5_DESCRIPTION\",\n        \"TUTORIAL_SLIDE6_TITLE\",\n        \"TUTORIAL_SLIDE6_DESCRIPTION\",\n      ]).subscribe(\n      (values) => {\n        this.slides = [\n          {title: values['TUTORIAL_SLIDE2_TITLE'], description: values['TUTORIAL_SLIDE2_DESCRIPTION']},\n          {title: values['TUTORIAL_SLIDE3_TITLE'], description: values['TUTORIAL_SLIDE3_DESCRIPTION']},\n          {title: values['TUTORIAL_SLIDE4_TITLE'], description: values['TUTORIAL_SLIDE4_DESCRIPTION']},\n          {title: values['TUTORIAL_SLIDE5_TITLE'], description: values['TUTORIAL_SLIDE5_DESCRIPTION']},\n          {title: values['TUTORIAL_SLIDE6_TITLE'], description: values['TUTORIAL_SLIDE6_DESCRIPTION']},\n        ];\n      });\n\n    this.slider.lockSwipes(true);\n  };\n\n  continueSwipe() {\n    this.slider.slideNext();\n  }\n\n  onTermsConfirmation() {\n    this.slider.lockSwipes(false);\n    this.slider.slideNext();\n  }\n\n  openTerms() {\n    this.navCtrl.push(TermsPage)\n  }\n\n  startApp() {\n    console.log(\"Tutorial has been accepted! Savinng it to storage\");\n    this.nativeStorage.setItem('tutorialAccepted', true);\n    this.navCtrl.setRoot(LoadingPage);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tutorial/tutorial.ts","import {Component, OnInit, ViewChild} from \"@angular/core\";\nimport {\n  AlertController,\n  Button, List, NavController, NavParams, Slides, ToastController\n} from \"ionic-angular\";\nimport {SmileQueryService} from \"../../services/SmileQueryService\";\nimport {InfoPage} from \"../info/info\";\nimport {LoadingPage} from \"../loading/loading\";\nimport {TranslateService} from \"@ngx-translate/core\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\n\nexport interface Questionaire {\n  id: number,\n  title: string,\n  description: string,\n  pages: Page[];\n}\n\nexport interface Page {\n  id: number,\n  title: string,\n  text: string,\n  answers: Answer[]\n}\n\nexport interface Answer {\n  id: number;\n  text: string,\n  type: string,\n  value: number\n}\n\nexport interface SelectedValues {\n  questionaireId: number,\n  pageId: number,\n  answerId: number,\n  valueAnswer: number,\n  textAnswer: string\n}\n\n@Component({\n  selector: 'questionaire-page',\n  templateUrl: 'questionaire.html',\n})\nexport class QuestionairePage implements OnInit {\n\n  @ViewChild('slides')\n  slides: Slides;\n  @ViewChild('nextButton')\n  nextButton: Button;\n\n  @ViewChild('list')\n  list: List;\n\n  submittedAlready: boolean;\n\n  questionaire: Questionaire;\n  selectedAnswers: SelectedValues[] = [];\n\n  currentSelectedValue: number;\n  currentTextValue: string;\n\n\n  alertPlaceholder: string;\n  alertOkay: string;\n  alertCancel: string;\n\n  constructor(private navCtrl: NavController,\n              private navParams: NavParams,\n              private toastCtrl: ToastController,\n              private nativeStorage: NativeStorage,\n              private alertCtrl: AlertController,\n              private smileQueryService: SmileQueryService,\n              private translateService: TranslateService) {\n    this.translateService.get(['QUESTIONAIRE_ALERT_PLACEHOLDER', 'QUESTIONAIRE_ALERT_OK', 'QUESTIONAIRE_ALERT_CANCEL']).subscribe(values => {\n      this.alertPlaceholder = values['QUESTIONAIRE_ALERT_PLACEHOLDER'];\n      this.alertOkay = values['QUESTIONAIRE_ALERT_OK'];\n      this.alertCancel = values['QUESTIONAIRE_ALERT_CANCEL'];\n    })\n  }\n\n  ngOnInit() {\n    this.questionaire = this.navParams.get('questionaire');\n    // sort the id's, because we receive them unsorted from the backend\n    this.questionaire.pages.sort((p1, p2) => {\n      return p1.id - p2.id\n    });\n    this.questionaire.pages.forEach((page) => {\n      page.answers.sort((a1, a2) => {\n        return a1.id - a2.id;\n      })\n    });\n\n    this.slides.lockSwipes(true);\n  }\n\n  nextSlide() {\n    if (this.slides.isEnd()) {\n      //collect last answer and submit\n      this.collectAnswer(this.slides.getActiveIndex() - 1);\n      return this.submit();\n    }\n\n    this.slides.lockSwipes(false);\n    this.slides.slideNext();\n\n    if (this.slides.getActiveIndex() > 1) {\n      // collect previous page answer\n      this.collectAnswer(this.slides.getActiveIndex() - 2);\n\n      this.currentSelectedValue = null;\n      this.currentTextValue = null;\n\n      if (this.questionaire.pages[this.slides.getActiveIndex() - 1].answers[0].type === 'input_text') {\n        // this is always 1 for input_text\n        this.currentSelectedValue = 1;\n      }\n    }\n\n    this.slides.lockSwipes(true);\n  }\n\n  isRadioType(index: number) {\n    return this.questionaire.pages[index].answers[0].type === 'radio' || this.questionaire.pages[index].answers[0].type === 'radio_text';\n  }\n\n  isTextType(index: number) {\n    if (this.questionaire.pages[index].answers[0].type === 'input_text') {\n      return true;\n    } else if (this.questionaire.pages[index].answers[0].type === 'input_number') {\n      return false;\n    } else {\n      return this.questionaire.pages[index].answers.find((answer) => {\n          return answer.value === this.currentSelectedValue\n        }).type === 'radio_text'\n    }\n  }\n\n  openTextField(answer: any) {\n    if (answer.type === 'radio_text') {\n      let alert = this.alertCtrl.create({\n        title: answer.text,\n        subTitle: '',\n        inputs: [\n          {\n            name: 'answer',\n            placeholder: this.alertPlaceholder\n          }\n        ],\n        buttons: [{\n          text: this.alertOkay,\n          handler: data => {\n            if (data.answer !== \"\") {\n              return data.answer;\n            } else {\n              return false;\n            }\n          }\n        },\n          {\n            text: this.alertCancel,\n            role: 'cancel',\n          }]\n      });\n      alert.onDidDismiss((data: any, role: string) => {\n        console.log(\"Dismissed alert, received input\", data.answer);\n        if (data.answer.length > 0 && role !== \"cancel\") {\n          console.log(\"Dismissed alert, input accepted!\");\n          this.currentTextValue = data.answer;\n        } else {\n          this.currentTextValue = null;\n          this.currentSelectedValue = null;\n        }\n      });\n      alert.present();\n    }\n  }\n\n  collectAnswer(index: number) {\n    this.selectedAnswers.push({\n      questionaireId: this.questionaire.id,\n      pageId: this.questionaire.pages[index].id,\n\n      // find the answers id via the selected value, if no radio type its always the first entry\n      answerId: this.isRadioType(index) ? this.questionaire.pages[index].answers.find((answer) => {\n        return answer.value === this.currentSelectedValue\n      }).id : this.questionaire.pages[index].answers[0].id,\n\n      valueAnswer: this.currentSelectedValue,\n\n      textAnswer: this.isTextType(index) ? this.currentTextValue : null\n    });\n\n  }\n\n  submit() {\n    // prevent double submissions\n    if (this.submittedAlready) {\n      return;\n    }\n    console.log(\"Entered answers\", this.selectedAnswers);\n    this.smileQueryService.postQuestionaireAnswer(this.selectedAnswers).subscribe((result) => {\n      console.log(\"Posting result\", result);\n\n      if (this.shouldShowDepressionWarning()) {\n        this.openDepressionWarningPage();\n        return;\n      }\n\n      if (this.shouldShowStudyEndPage()) {\n        this.openStudyFinishPage();\n        return;\n      }\n\n      this.navCtrl.setRoot(LoadingPage);\n    }, error => {\n      this.smileQueryService.catchErrorHandling(error, this.navCtrl, this.toastCtrl, this.nativeStorage);\n    });\n    this.submittedAlready = true;\n  }\n\n  shouldShowStudyEndPage() {\n    return this.questionaire.id == 7;\n  }\n\n  shouldShowDepressionWarning() {\n    if (this.questionaire.id == 6) {\n      let sum = 0;\n      this.selectedAnswers.forEach(selected => {\n        sum += selected.valueAnswer;\n      });\n      if (sum >= 50) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  openDepressionWarningPage() {\n    this.translateService.get(['DEPRESSION_WARN_TITLE', 'DEPRESSION_WARN_DESCRIPTION',\n      'DEPRESSION_WARN_LINK', 'DEPRESSION_WARN_AFTERLINK', 'DEPRESSION_WARN_NUMBER']).subscribe(values => {\n      this.navCtrl.setRoot(InfoPage, {\n        slides: [{\n          title: values['DEPRESSION_WARN_TITLE'],\n          description: values['DEPRESSION_WARN_DESCRIPTION'],\n          link: values['DEPRESSION_WARN_LINK'],\n          afterLink: values['DEPRESSION_WARN_AFTERLINK'],\n          phoneNumber: values['DEPRESSION_WARN_NUMBER']\n        }],\n        redirectTo: LoadingPage\n      });\n    });\n  }\n\n  openStudyFinishPage() {\n    this.translateService.get([\n      'FINISH_EXPLAIN_1_TITLE',\n      'FINISH_EXPLAIN_1_DESCRIPTION',\n      'FINISH_EXPLAIN_2_TITLE',\n      'FINISH_EXPLAIN_2_DESCRIPTION',\n      'FINISH_EXPLAIN_3_TITLE',\n      'FINISH_EXPLAIN_3_DESCRIPTION',\n      'FINISH_EXPLAIN_4_TITLE',\n      'FINISH_EXPLAIN_4_DESCRIPTION',\n      'FINISH_EXPLAIN_5_TITLE',\n      'FINISH_EXPLAIN_5_DESCRIPTION',\n      'FINISH_EXPLAIN_6_TITLE',\n      'FINISH_EXPLAIN_6_DESCRIPTION',\n      'FINISH_EXPLAIN_7_TITLE',\n      'FINISH_EXPLAIN_7_DESCRIPTION'\n    ]).subscribe((value) => {\n      this.navCtrl.setRoot(InfoPage, {\n        slides: [\n          {\n            title: value['FINISH_EXPLAIN_1_TITLE'],\n            description: value['FINISH_EXPLAIN_1_DESCRIPTION']\n          },\n          {\n            title: value['FINISH_EXPLAIN_2_TITLE'],\n            description: value['FINISH_EXPLAIN_2_DESCRIPTION']\n          },\n          {\n            title: value['FINISH_EXPLAIN_3_TITLE'],\n            description: value['FINISH_EXPLAIN_3_DESCRIPTION']\n          },\n          {\n            title: value['FINISH_EXPLAIN_4_TITLE'],\n            description: value['FINISH_EXPLAIN_4_DESCRIPTION']\n          },\n          {\n            title: value['FINISH_EXPLAIN_5_TITLE'],\n            description: value['FINISH_EXPLAIN_5_DESCRIPTION']\n          },\n          {\n            title: value['FINISH_EXPLAIN_6_TITLE'],\n            description: value['FINISH_EXPLAIN_6_DESCRIPTION']\n          },\n          {\n            title: value['FINISH_EXPLAIN_7_TITLE'],\n            description: value['FINISH_EXPLAIN_7_DESCRIPTION']\n          },\n\n        ],\n        redirectTo: LoadingPage\n      })\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/questionaire/questionaire.ts","import {Component, ViewChild} from \"@angular/core\";\nimport {NavController, NavParams, Slides} from \"ionic-angular\";\nimport {InterventionPage} from \"../intervention/intervention\";\n\nexport interface Slide {\n  title: string,\n  description: string,\n  link?: string,\n  afterLink?: string,\n  phoneNumber?: string\n}\n\n@Component({\n  selector: 'info-page',\n  templateUrl: 'info.html'\n})\nexport class InfoPage {\n  @ViewChild('slider')\n  slider: Slides;\n  slides: Slide[];\n  redirectTo;\n\n  constructor(private navParams: NavParams,\n              private navCtrl: NavController) {\n    this.redirectTo = navParams.get('redirectTo');\n    this.slides = navParams.get('slides');\n  }\n\n  okay() {\n    if (this.slider.isEnd()) {\n      if (this.redirectTo) {\n        this.navCtrl.setRoot(this.redirectTo);\n      }\n      this.navCtrl.setRoot(InterventionPage);\n    } else {\n      this.slider.slideNext();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/info/info.ts","import {Component} from \"@angular/core\";\nimport {FormControl, FormGroup, Validators} from \"@angular/forms\";\nimport {NavController, ToastController} from \"ionic-angular\";\nimport {SmileQueryService} from \"../../services/SmileQueryService\";\nimport {InterventionPage} from \"../intervention/intervention\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\n\n@Component({\n  selector: 'intervention-action',\n  templateUrl: 'intervention-action.html'\n})\nexport class InterventionActionPage {\n\n  interventionForm: FormGroup;\n  renderTime: Date;\n  userGroup: number;\n\n  constructor(private navCtrl: NavController,\n              private smileQueryService: SmileQueryService,\n              private toastCtrl: ToastController,\n              private nativeStorage: NativeStorage) {\n    this.interventionForm = new FormGroup({\n      'input1': new FormControl('', Validators.required),\n      'input2': new FormControl('',),\n      'input3': new FormControl('',)\n    });\n\n    this.renderTime = new Date();\n    this.nativeStorage.getItem('userGroup').then((value: number) => {\n      console.log(\"Loaded userGroup: \");\n      console.log(value);\n      this.userGroup = value;\n    });\n  }\n\n  submitIntervention() {\n    if (this.interventionForm.valid) {\n      this.smileQueryService.postInterventionAnswer({\n        'answerInput1': this.interventionForm.value.input1,\n        'answerInput2': this.interventionForm.value.input2,\n        'answerInput3': this.interventionForm.value.input3,\n        'submissionDuration': new Date().getTime() - this.renderTime.getTime()\n      }).subscribe((result) => {\n        //this will always be a good result, since we restrict postings in client\n        console.log(\"Intervention answers posted\", result);\n        this.navCtrl.setRoot(InterventionPage);\n      }, error => {\n        this.smileQueryService.catchErrorHandling(error, this.navCtrl, this.toastCtrl, this.nativeStorage);\n      })\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/intervention-action/intervention-action.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\nimport {enableProdMode} from \"@angular/core\";\nenableProdMode();\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import {BrowserModule} from '@angular/platform-browser';\nimport {ErrorHandler, NgModule} from '@angular/core';\nimport {IonicApp, IonicErrorHandler, IonicModule} from 'ionic-angular';\nimport {SplashScreen} from '@ionic-native/splash-screen';\nimport {StatusBar} from '@ionic-native/status-bar';\n\nimport {MyApp} from './app.component';\nimport {Http, HttpModule} from \"@angular/http\";\nimport {TranslateLoader, TranslateModule} from \"@ngx-translate/core\";\nimport {TranslateHttpLoader} from '@ngx-translate/http-loader';\nimport {WelcomePage} from \"../pages/welcome/welcome\";\nimport {TutorialPage} from \"../pages/tutorial/tutorial\";\nimport {InterventionPage} from \"../pages/intervention/intervention\";\nimport {IonicStorageModule} from \"@ionic/storage\";\nimport {AuthenticationService} from \"../services/AuthenticationService\";\nimport {SmileQueryService} from \"../services/SmileQueryService\";\nimport {QuestionairePage} from \"../pages/questionaire/questionaire\";\nimport {TermsPage} from \"../pages/terms/terms\";\nimport {InterventionActionPage} from \"../pages/intervention-action/intervention-action\";\n\nimport {LocalNotifications} from '@ionic-native/local-notifications';\nimport {InfoPage} from \"../pages/info/info\";\nimport {LoadingPage} from \"../pages/loading/loading\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\nimport {UniqueDeviceID} from \"@ionic-native/unique-device-id\";\n\n\nexport function HttpLoaderFactory(http: Http) {\n  return new TranslateHttpLoader(http, './assets/i18n/', '.json');\n}\n\n@NgModule({\n  declarations: [\n    MyApp,\n    TermsPage,\n    WelcomePage,\n    LoadingPage,\n    TutorialPage,\n    InfoPage,\n    InterventionPage,\n    QuestionairePage,\n    InterventionActionPage\n  ],\n  imports: [\n    BrowserModule,\n    HttpModule,\n    TranslateModule.forRoot({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [Http]\n      }\n    }),\n    IonicModule.forRoot(MyApp, {\n      scrollPadding: false,\n      scrollAssist: true,\n      autoFocusAssist: false\n    }),\n    IonicStorageModule.forRoot()\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    InterventionPage,\n    TermsPage,\n    WelcomePage,\n    LoadingPage,\n    TutorialPage,\n    QuestionairePage,\n    InfoPage,\n    InterventionActionPage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    AuthenticationService,\n    LocalNotifications,\n    NativeStorage,\n    UniqueDeviceID,\n    SmileQueryService,\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import {Component} from '@angular/core';\nimport {Platform} from 'ionic-angular';\nimport {StatusBar} from '@ionic-native/status-bar';\nimport {SplashScreen} from '@ionic-native/splash-screen';\n\nimport {WelcomePage} from \"../pages/welcome/welcome\";\nimport {TranslateService} from \"@ngx-translate/core\";\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage: any = WelcomePage;\n\n  constructor(private translate: TranslateService, platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    this.initTranslate();\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n\n\n  initTranslate() {\n    // Set the default language for translation strings, and the current language.\n    this.translate.setDefaultLang('de');\n\n    if (this.translate.getBrowserLang() !== undefined) {\n      this.translate.use(this.translate.getBrowserLang());\n    } else {\n      this.translate.use('de'); // Set your language here\n    }\n  }\n\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {Injectable} from \"@angular/core\";\nimport {Http, Headers, Response} from \"@angular/http\";\nimport {Observable} from \"rxjs/Observable\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\nimport {TranslateService} from \"@ngx-translate/core\";\nimport {NavController, ToastController} from \"ionic-angular\";\nimport {WelcomePage} from \"../pages/welcome/welcome\";\n\n@Injectable()\nexport class SmileQueryService {\n\n  public static baseUrl = \"https://api.smile-studie.de/\";\n  private questionaireUrl = SmileQueryService.baseUrl + \"questionaire\";\n  private questionaireAnswerUrl = SmileQueryService.baseUrl + \"answer\";\n  private interventionAnswerUrl = SmileQueryService.baseUrl + \"intervention\";\n  private interventionGroupUrl = SmileQueryService.baseUrl + \"interventionGroup\";\n  private nextInterventionTimeUrl = SmileQueryService.baseUrl + \"nextIntervention\";\n\n  unknownServerError: string;\n  relogError: string;\n\n  constructor(private http: Http,\n              private nativeStorage: NativeStorage,\n              private translateService: TranslateService) {\n    translateService.get(['SERVER_ERROR', 'RELOG_ERROR']).subscribe(values => {\n      this.unknownServerError = values['SERVER_ERROR'];\n      this.relogError = values['RELOG_ERROR'];\n    })\n  }\n\n  getQuery(url: string): Observable<any> {\n    return new Observable(observer => {\n      this.nativeStorage.getItem('token').then(token => {\n        let header = new Headers({\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        });\n        this.http.get(url, {headers: header}).map(SmileQueryService.sendFunction)\n          .catch(this.catchFunction).subscribe(response => {\n          observer.next(response);\n          observer.complete();\n        }, error => {\n          observer.error(error);\n          observer.complete();\n        });\n      });\n    });\n  }\n\n  postQuery(url: string, body) {\n    return new Observable(observer => {\n      this.nativeStorage.getItem('token').then(token => {\n        let header = new Headers({\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        });\n        this.http.post(url, body, {headers: header}).map(SmileQueryService.sendFunction)\n          .catch(this.catchFunction).subscribe(response => {\n          observer.next(response);\n          observer.complete();\n        }, error => {\n          observer.error(error);\n          observer.complete();\n        });\n      })\n    });\n  }\n\n  getInterventionGroup(): Observable<any> {\n    return this.getQuery(this.interventionGroupUrl);\n  }\n\n\n  getQuestionaire() {\n    return this.getQuery(this.questionaireUrl);\n  }\n\n  postInterventionAnswer(body) {\n    return this.postQuery(this.interventionAnswerUrl, body);\n  }\n\n  postQuestionaireAnswer(body) {\n    return this.postQuery(this.questionaireAnswerUrl, body);\n  }\n\n  getNextInterventionTime() {\n    return this.getQuery(this.nextInterventionTimeUrl);\n  }\n\n  private static sendFunction(response: Response) {\n    if (response.status == 200) {\n      console.log(\"Query has status 200\", response);\n      try {\n        return response.json();\n      } catch (err) {\n        console.log(\"Query has status 200 but empty body\", response);\n        return true;\n      }\n    } else {\n      console.log(\"Query has a status != 200\", response);\n      return false;\n    }\n  }\n\n  private catchFunction(error) {\n    console.log(\"Query returned error\", error);\n    try {\n      let errorStatus = error.json().status;\n      console.log(\"Error could be parsed\", errorStatus);\n      if (errorStatus == 401) {\n        console.log(\"Token is not valid anymore -> relog necessary\");\n        return Observable.throw(errorStatus);\n      } else {\n        console.log(\"Weird server error, it should only return 401!\");\n        return Observable.throw(errorStatus + \" \" + error.json().message);\n      }\n    } catch (err) {\n      console.log(\"Error could NOT be parsed, must be unreachable\");\n      return Observable.throw(this.unknownServerError);\n    }\n  }\n\n  public catchErrorHandling(error, navCtrl: NavController, toastCtrl: ToastController, nativeStorage: NativeStorage) {\n    console.log(\"catchErrorHandling()\");\n    console.log(error);\n    if (error == 401) {\n      console.log(\"Token invalid -> clear all data and ask user to relog\");\n      toastCtrl.create({\n        message: this.relogError,\n        duration: 3000\n      }).present();\n      console.log(\"Clearing storage and switching to WelcomePage\");\n      nativeStorage.clear().then(() => {\n        navCtrl.setRoot(WelcomePage);\n      });\n    } else {\n      console.log(\"Either server can't be reached or unknown error, printing toast\");\n      let message = error.startsWith('undefined') ? this.unknownServerError : error;\n      toastCtrl.create({\n        message: message,\n        duration: 3000\n      }).present();\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/SmileQueryService.ts","import {Component, OnInit} from \"@angular/core\";\nimport {SmileQueryService} from \"../../services/SmileQueryService\";\nimport {NavController, ToastController} from \"ionic-angular\";\nimport {QuestionairePage} from \"../questionaire/questionaire\";\nimport {InterventionPage} from \"../intervention/intervention\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\n@Component({\n  selector: 'loading-page',\n  templateUrl: 'loading.html'\n})\nexport class LoadingPage implements OnInit {\n\n  constructor(private smileQueryService: SmileQueryService,\n              private navCtrl: NavController,\n              private toastCtrl: ToastController,\n              private nativeStorage: NativeStorage) {\n  }\n\n\n  //TODO loading screens are for loading, duh. Why don't i load the InterventionPage stuff there?\n\n  ngOnInit() {\n    console.log(\"Getting new Questionaires\");\n    this.smileQueryService.getQuestionaire().subscribe(result => {\n      if (result.id != null) {\n        console.log(\"Got questionaire \" + result.id);\n        this.navCtrl.setRoot(QuestionairePage, {questionaire: result});\n      } else {\n        console.log(\"No questionaires to do right now, next questionaire time:\");\n        console.log(result.nextQuestionaireTime);\n        this.nativeStorage.setItem('nextQuestionaireDate', result.nextQuestionaireTime);\n        this.getGroup();\n      }\n    }, error => {\n      this.smileQueryService.catchErrorHandling(error, this.navCtrl, this.toastCtrl, this.nativeStorage);\n    });\n  }\n\n  getGroup() {\n    console.log(\"Getting group since it might have changed\");\n    this.smileQueryService.getInterventionGroup().subscribe(result => {\n      console.log('Group gotten from server:');\n      console.log(result);\n      this.nativeStorage.setItem('userGroup', result).then(() => {\n        this.navCtrl.setRoot(InterventionPage);\n      });\n    }, error => {\n      this.smileQueryService.catchErrorHandling(error, this.navCtrl, this.toastCtrl, this.nativeStorage);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/loading/loading.ts","import {Component, OnInit} from \"@angular/core\";\nimport {NavController, ToastController} from \"ionic-angular\";\nimport {SmileQueryService} from \"../../services/SmileQueryService\";\nimport {InterventionActionPage} from \"../intervention-action/intervention-action\";\nimport {LocalNotifications} from \"@ionic-native/local-notifications\";\nimport {TranslateService} from \"@ngx-translate/core\";\nimport {TermsPage} from \"../terms/terms\";\nimport {NativeStorage} from \"@ionic-native/native-storage\";\nimport {Observable} from \"rxjs/Observable\";\nimport {Subscriber} from \"rxjs/Subscriber\";\n@Component({\n  selector: 'intervention-page',\n  templateUrl: 'intervention.html'\n})\nexport class InterventionPage implements OnInit {\n\n  alertTime: string;\n  alertActive: boolean;\n\n  interventionReadyTime: boolean;\n  userGroup: number;\n\n  alertDate: Date;\n  nextInterventionDate: Date;\n  nextQuestionaireDate: Date;\n\n  infoText: string;\n  notificationTitle: string;\n  notificationText: string;\n\n\n  constructor(private navCtrl: NavController,\n              private smileQueryService: SmileQueryService,\n              private localNotifications: LocalNotifications,\n              private translateService: TranslateService,\n              private nativeStorage: NativeStorage,\n              private toastCtrl: ToastController) {\n    this.translateService.get(['NOTIFICATION_TITLE', 'NOTIFICATION_TEXT']).subscribe(values => {\n      this.notificationTitle = values['NOTIFICATION_TITLE'];\n      this.notificationText = values['NOTIFICATION_TEXT'];\n    })\n  }\n\n  ngOnInit(): void {\n    this.getLocalstorageValues();\n  }\n\n  /**\n   * Load all values from nativeStorage and do some stuff when all is ready.\n   */\n  getLocalstorageValues() {\n    let observable = new Observable(observer => {\n      let doneAmount = 0;\n      this.nativeStorage.getItem('alertActive').then(value => {\n        this.alertActive = value;\n        console.log(\"loaded alertActive\", this.alertActive);\n\n        observer.next(\"alertActive handled\");\n        doneAmount += 1;\n        console.log(\"doneAmount is \" + doneAmount);\n        if (doneAmount == 5) {\n          observer.complete();\n        }\n\n      }).catch(() => {\n        this.initNotificationActive();\n\n        observer.next(\"alertActive handled\");\n        doneAmount += 1;\n        console.log(\"doneAmount is \" + doneAmount);\n        if (doneAmount == 5) {\n          observer.complete();\n        }\n      });\n\n      this.nativeStorage.getItem('alertDate').then(value => {\n        let date = new Date(value);\n        this.handleAlertDate(date);\n\n        observer.next(\"alertDate handled\");\n        doneAmount += 1;\n        console.log(\"doneAmount is \" + doneAmount);\n        if (doneAmount == 5) {\n          observer.complete();\n        }\n\n      }).catch(() => {\n        this.initAlertDate();\n\n        observer.next(\"alertDate handled\");\n        doneAmount += 1;\n        console.log(\"doneAmount is \" + doneAmount);\n        if (doneAmount == 5) {\n          observer.complete();\n        }\n      });\n\n      this.nativeStorage.getItem('userGroup').then(value => {\n        this.handleUserGroup(value);\n\n        observer.next(\"userGroup handled\");\n        doneAmount += 1;\n        console.log(\"doneAmount is \" + doneAmount);\n        if (doneAmount == 5) {\n          observer.complete();\n        }\n      });\n\n      // this should always be set if we can get to the interventionpage\n      this.nativeStorage.getItem('nextQuestionaireDate').then(value => {\n        this.nextQuestionaireDate = new Date(value);\n\n        observer.next(\"nextQuestionaireDate handled\");\n        doneAmount += 1;\n        console.log(\"doneAmount is \" + doneAmount);\n        if (doneAmount == 5) {\n          observer.complete();\n        }\n      });\n\n      this.smileQueryService.getNextInterventionTime().subscribe(result => {\n        console.log('Next interventionTime result');\n        console.log(result);\n        this.nextInterventionDate = new Date(result);\n        let currentDate = new Date();\n        let timeHasPassed = currentDate > this.nextInterventionDate;\n\n        console.log(\"Next intervention at\", this.nextInterventionDate);\n\n        if (timeHasPassed) {\n          this.interventionReadyTime = true;\n        }\n\n        observer.next('nextInterventionTime handled');\n        doneAmount += 1;\n        console.log(\"doneAmount is \" + doneAmount);\n        if (doneAmount == 5) {\n          observer.complete();\n        }\n      }, error => {\n        this.smileQueryService.catchErrorHandling(error, this.navCtrl, this.toastCtrl, this.nativeStorage);\n      })\n\n    });\n\n    observable.subscribe(Subscriber.create((message) => {\n      console.log(\"Subscriber: \" + message);\n    }, error => {\n      console.log(\"Subscriber: Error happened: \" + error);\n    }, () => {\n      console.log(\"Subscriber: observable is done\");\n      this.getInfoText();\n      this.setNotification();\n    }));\n  }\n\n  initNotificationActive() {\n    this.alertActive = true;\n    console.log(\"Initialized alertActive\", this.alertActive);\n    this.nativeStorage.setItem('alertActive', this.alertActive);\n  }\n\n  initAlertDate() {\n    let currentDate = new Date();\n    currentDate.setSeconds(0);\n    currentDate.setMinutes(0);\n    currentDate.setHours(17);\n    this.alertTime = InterventionPage.createISOString(currentDate);\n    this.alertDate = currentDate;\n    console.log(\"Initialized alertDate\", currentDate);\n    this.nativeStorage.setItem('alertDate', this.alertDate.getTime());\n  }\n\n  handleAlertDate(date: Date) {\n    this.alertTime = InterventionPage.createISOString(date);\n    this.alertDate = date;\n    console.log(\"Loaded alertDate\", date);\n  }\n\n  handleUserGroup(group: number) {\n    this.userGroup = group;\n    console.log(\"Loaded userGroup\", this.userGroup);\n  }\n\n  private static createISOString(date: Date) {\n    // i absolutely hate this\n    let day = date.getDate() >= 1 && date.getDate() <= 9 ? \"0\" + date.getDate() : date.getDate();\n    let month = (date.getMonth() + 1) >= 1 && (date.getMonth() + 1 ) <= 9 ? \"0\" + (date.getMonth() + 1) : (date.getMonth() + 1);\n    let hours = date.getHours() >= 0 && date.getHours() <= 9 ? \"0\" + date.getHours() : date.getHours();\n    let minutes = date.getMinutes() >= 0 && date.getMinutes() <= 9 ? \"0\" + date.getMinutes() : date.getMinutes();\n    let seconds = date.getSeconds() >= 0 && date.getSeconds() <= 9 ? \"0\" + date.getSeconds() : date.getSeconds();\n\n    return date.getFullYear() + \"-\" + month + \"-\" + day\n      + \"T\" + hours + \":\" + minutes + \":\" +\n      seconds + \"Z\";\n  }\n\n  getInfoText() {\n    console.log(\"Called getInfoText()\");\n    if (this.userGroup != 3) {\n      this.translateService.get(['INTERVENTION_BUTTON_NORMAL', 'INTERVENTION_BUTTON_NORMAL_END']).subscribe(result => {\n        this.infoText = result['INTERVENTION_BUTTON_NORMAL'] + \" \" + InterventionPage.formatDate(this.nextQuestionaireDate) + \" \" + result['INTERVENTION_BUTTON_NORMAL_END'];\n      });\n    } else {\n      this.translateService.get(['INTERVENTION_BUTTON_3', 'INTERVENTION_BUTTON_3_END']).subscribe(result => {\n        this.infoText = result['INTERVENTION_BUTTON_3'] + \" \" + InterventionPage.formatDate(this.nextQuestionaireDate) + \" \" + result['INTERVENTION_BUTTON_3_END'];\n      });\n    }\n  }\n\n  static formatDate(date: Date) {\n    return date ? date.getDate().toString() + \".\" + (date.getMonth() + 1).toString() : \"\";\n  }\n\n  updateAlertActivation() {\n    this.nativeStorage.setItem('alertActive', this.alertActive);\n    this.setNotification();\n  }\n\n  updateAlertTime() {\n    let utcDate = new Date(this.alertTime);\n    let offset = utcDate.getTimezoneOffset() / 60;\n    let gmtDate = new Date(utcDate.getTime() + offset * 60 * 60 * 1000);\n\n    this.alertTime = InterventionPage.createISOString(gmtDate);\n    this.alertDate = gmtDate;\n    this.nativeStorage.setItem('alertDate', gmtDate.toString());\n    console.log('Updated alertDate', gmtDate.getTime());\n    this.setNotification();\n  }\n\n  setNotification() {\n    console.log(\"setNotification: alertActive && alertDate\", this.alertActive, this.alertDate);\n    if (this.alertActive && this.alertDate && this.userGroup != 3) {\n      console.log(\"setNotification: Notification will be set!\");\n      let date = new Date();\n\n      if (date > this.alertDate) {\n        let nextDayDate = new Date(this.alertDate.getTime() + 24 * 60 * 60 * 1000);\n        console.log(\"setNotification: old alertDate: \", this.alertDate);\n        this.alertDate = nextDayDate;\n        console.log(\"setNotification: next alertDate: \", this.alertDate);\n        this.nativeStorage.setItem('alertDate', this.alertDate);\n      } else {\n        console.log(\"setNotification: we are not past the date!\", date, this.alertDate);\n      }\n\n      this.localNotifications.clear(73468);\n      this.localNotifications.schedule({\n        id: 73468,\n        text: this.notificationTitle,\n        title: this.notificationText,\n        firstAt: this.alertDate,\n        every: \"day\"\n      })\n    } else {\n      console.log(\"Notification disabled\");\n      this.localNotifications.clear(73468);\n    }\n  }\n\n  startIntervention() {\n    this.navCtrl.push(InterventionActionPage);\n  }\n\n  showInfo() {\n    this.navCtrl.push(TermsPage);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/intervention/intervention.ts"],"sourceRoot":""}